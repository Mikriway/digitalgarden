---
{"dg-publish":true,"permalink":"/cybernex/proekty/tz-bot-nutri-cz-iolog-ii/","dgPassFrontmatter":true,"created":"2025-06-23T20:41:26.655+08:00","updated":"2025-06-24T11:52:17.163+08:00"}
---




## ТЗ
## 1. Цели проекта

  

Создать Telegram-бота, выполняющего функции персонального нутрициолога, с возможностью загрузки фото еды и получения анализа питания. Бот будет предоставлять ежедневные и еженедельные отчёты о питании пользователя, поддерживать платную подписку, иметь реферальную систему и интеграцию с веб-админкой для управления.

  

---

  

## 2. Основной функционал

  

### 2.1 Функции Telegram-бота

  

- Анкетирование пользователя перед использованием сервиса

- Загрузка фото еды пользователем

- Получение анализа блюда (калорийность, состав, рекомендации) через GPT

- Поддержка текстовых вопросов по питанию

- Хранение всех отправленных фото и данных в Supabase

- Отправка **ежедневных** и **еженедельных** отчетов о рационе

- Подписка (оплата, автопродление)

- Реферальная программа (кэшбек за приглашение новых пользователей)

- Мультиязычность (RU + EN, минимум)

  

---

  

## 3. Описание функционала

  

### 3.1 Анкетирование (перед использованием)

  

Пользователь проходит короткое анкетирование:

  

- Цель питания (похудение / набор массы / поддержание веса)

- Предпочтения / ограничения (если будут определены)

- Возраст, рост, вес (по необходимости)

  

Анкетирование необходимо для персонализации рекомендаций.

  

### 3.2 Работа с фото еды

  

- Пользователь отправляет фото еды → n8n отправляет запрос в GPT → GPT описывает блюдо, дает калорийность, рекомендации

- Фото и анализ сохраняются в Supabase

- В случае невозможности анализа → отправляется сообщение об ошибке

  

### 3.3 Ежедневные и еженедельные отчеты

  

- Формат: текстовое сообщение

- Информация:

    - Количество приемов пищи

    - Общая калорийность за день/неделю

    - Сводная рекомендация по достижению цели

- В дальнейшем опционально добавить визуализацию (диаграммы)

  

### 3.4 Оплата

  

- Платная подписка (варианты подписки определить позже)

- Автопродление подписки

- Интеграция с ЮKassa (или другим провайдером)

- Блокировка функционала при окончании подписки

  

### 3.5 Реферальная программа

  

- Генерация уникальной реферальной ссылки

- Приглашённый активирует подписку → реферер получает кэшбек (определить механику суммы)

- Хранение связей между пользователями в Supabase

  

---

  

## 4. Веб-админка

  

### 4.1 Функции

  

- Список пользователей (ID, username, дата регистрации, статус подписки)

- Статистика общего использования (количество активных пользователей, общее число отправленных фото и запросов)

- Возможность отправлять рассылки по всем пользователям

- Просмотр статистики по реферальной программе (количество приглашенных)

  

---

  

## 5. Хранение данных

  

- **Supabase** используется для хранения:

    - Пользовательских анкет

    - Истории питания (фото, результаты анализа)

    - Данных о подписке

    - Реферальных связей

- Резервные копии на стороне Supabase (если потребуется — добавить позже)

  

---

  

## 6. Администрирование и поддержка

  

- Панель управления → доступ через защищённый логин/пароль

- Без разграничения ролей (на данный момент)

- Поддержка мультиязычности в интерфейсе веб-админки

  

---

  

## 7. Технические требования

  

- Telegram-бот → (n8n), Telegram Bot API

- Веб-админка  

- Хранение данных → Supabase (PostgreSQL + Storage)

- Оплата → ЮKassa или другая  (по итогу согласования)

- Анализ фото → GPT (через n8n)

- Хостинг n8n → выделенный сервер

  
**
 
 